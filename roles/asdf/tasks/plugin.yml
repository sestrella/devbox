---
- name: "{{ plugin.name }} - Install dependencies"
  apt:
    name: "{{ plugin.dependencies | default([]) }}"
    update_cache: true
  become: true

- name: "{{ plugin.name }} - Install plugin"
  command: "{{ asdf_dir }}/bin/asdf plugin-add {{ plugin.name }}"
  args:
    creates: "{{ asdf_dir }}/plugins/{{ plugin.name }}"

- include_tasks: version.yml
  with_items: "{{ plugin.versions }}"
  loop_control:
    loop_var: version
